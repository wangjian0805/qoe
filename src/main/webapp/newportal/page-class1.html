<!doctype html>
<html lang="en">

<head>
	<title>移动视频业务QoE评测系统</title>
	<meta charset="utf-8">
	<link rel="icon" href="https://static.jianshukeji.com/highcharts/images/favicon.ico">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
	<!-- VENDOR CSS -->

	<link rel="stylesheet" href="assets/vendor/bootstrap/css/bootstrap.min.css">
	<link rel="stylesheet" href="assets/vendor/font-awesome/css/font-awesome.min.css">
	<link rel="stylesheet" href="assets/vendor/linearicons/style.css">
	<!-- MAIN CSS -->
	<link rel="stylesheet" href="assets/css/main.css">
	<!-- FOR DEMO PURPOSES ONLY. You should remove this in your project -->
	<link rel="stylesheet" href="assets/css/demo.css">
	<!-- GOOGLE FONTS -->
	<link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600,700" rel="stylesheet">
	<!-- ICONS -->
	<link rel="apple-touch-icon" sizes="76x76" href="assets/img/apple-icon.png">
	<link rel="icon" type="image/png" sizes="96x96" href="assets/img/favicon.png">

	<!-- Javascript -->
	<script src="assets/vendor/jquery/jquery.min.js"></script>
	<script src="assets/vendor/bootstrap/js/bootstrap.min.js"></script>
	<script src="assets/vendor/jquery-slimscroll/jquery.slimscroll.min.js"></script>
	<script src="assets/scripts/klorofil-common.js"></script>
	<script src="https://img.hcharts.cn/highcharts/highcharts.js"></script>
	<script src="https://img.hcharts.cn/highcharts/highcharts-more.js"></script>
	<script src="https://img.hcharts.cn/highcharts-plugins/highcharts-zh_CN.js"></script>
	<script src="https://img.hcharts.cn/highcharts/themes/sand-signika.js"></script>

	<link href="assets/vendor/bootstrap/css/bootstrap-table.css" rel="stylesheet">
	<script src="assets/vendor/bootstrap/js/bootstrap-table.js"></script>

	<script type="application/javascript">
        $.ajax({
            url:"http://localhost:8080/qoe/api/high/stastic",
            dataType:"json",
            type:"GET",
            success:function(response){
                var data = response.data;
                $("#test-num").html(data[0])
				$("#mac-num").html(data[1])
            }
        });
	</script>
	<script type="application/javascript">
        Date.prototype.Format = function (fmt) { //author: meizz
            var o = {
                "M+": this.getMonth() + 1, //月份
                "d+": this.getDate(), //日
                "H+": this.getHours(), //小时
                "m+": this.getMinutes(), //分
                "s+": this.getSeconds(), //秒
                "q+": Math.floor((this.getMonth() + 3) / 3), //季度
                "S": this.getMilliseconds() //毫秒
            };
            if (/(y+)/.test(fmt)) fmt = fmt.replace(RegExp.$1, (this.getFullYear() + "").substr(4 - RegExp.$1.length));
            for (var k in o)
                if (new RegExp("(" + k + ")").test(fmt)) fmt = fmt.replace(RegExp.$1, (RegExp.$1.length == 1) ? (o[k]) : (("00" + o[k]).substr(("" + o[k]).length)));
            return fmt;
        }
	</script>
</head>

<body>
	<!-- WRAPPER -->
	<div id="wrapper">
		<!-- NAVBAR -->
		<nav class="navbar navbar-default navbar-fixed-top">
			<div class="brand" style="width: 500px;">
				<a href="index.html"/><span class="span-wangjian" style="width:300px;">移动视频业务QoE评测系统</span>
			</div>
			<div class="container-fluid">

				<div class="navbar-btn navbar-btn-right">
					<a class="btn btn-success update-pro" href="#downloads/klorofil-pro-bootstrap-admin-dashboard-template/?utm_source=klorofil&utm_medium=template&utm_campaign=KlorofilPro" title="Upgrade to Pro" target="_blank"><i class="fa fa-rocket"></i> <span>SHOW</span></a>
				</div>
				<div id="navbar-menu">
					<ul class="nav navbar-nav navbar-right">
						<li class="dropdown">
							<a href="#" class="dropdown-toggle icon-menu" data-toggle="dropdown">
								<i class="lnr lnr-alarm"></i>
								<span class="badge bg-danger">2</span>
							</a>
							<ul class="dropdown-menu notifications">
								<li><a href="#" class="notification-item"><span class="dot bg-warning"></span>欢迎使用QoE测量数据展示平台！</a></li>
								<li><a href="#" class="notification-item"><span class="dot bg-danger"></span>请尽情使用吧~</a></li>
								<li><a href="#" class="more">查看所有</a></li>
							</ul>
						</li>
						<li class="dropdown">
							<a href="#" class="dropdown-toggle" data-toggle="dropdown"><img src="assets/img/user.png" class="img-circle" alt="Avatar"> <span>Lab640</span> <i class="icon-submenu lnr lnr-chevron-down"></i></a>
							<ul class="dropdown-menu">
								<li><a href="#"><i class="lnr lnr-user"></i> <span>个人中心</span></a></li>
								<li><a href="#"><i class="lnr lnr-envelope"></i> <span>我的消息</span></a></li>
								<li><a href="#"><i class="lnr lnr-cog"></i> <span>设置</span></a></li>
								<li><a href="#"><i class="lnr lnr-exit"></i> <span>注销</span></a></li>
							</ul>
						</li>
						<!-- <li>
							<a class="update-pro" href="#downloads/klorofil-pro-bootstrap-admin-dashboard-template/?utm_source=klorofil&utm_medium=template&utm_campaign=KlorofilPro" title="Upgrade to Pro" target="_blank"><i class="fa fa-rocket"></i> <span>UPGRADE TO PRO</span></a>
						</li> -->
					</ul>
				</div>
			</div>
		</nav>
		<!-- END NAVBAR -->
		<!-- LEFT SIDEBAR -->
		<div id="sidebar-nav" class="sidebar">
			<div class="sidebar-scroll">
				<nav>
					<ul class="nav">
						<li><a href="index.html" class=""><i class="lnr lnr-home"></i> <span>首页</span></a></li>
						<li>
							<a href="#subPages" data-toggle="collapse" class="active"><i class="lnr lnr-chart-bars"></i> <span>详情页</span> <i class="icon-submenu lnr lnr-chevron-left"></i></a>
							<div id="subPages" class="collapse in">
								<ul class="nav">
									<li><a href="page-class1.html" class="active">数据总览</a></li>
									<li><a href="page-class2.html" class="">区域详情</a></li>
								</ul>
							</div>
						</li>
						<li><a href="about.html" class=""><i class="lnr lnr-alarm"></i> <span>关于我们</span></a></li>
					</ul>
				</nav>
			</div>
		</div>
		<!-- END LEFT SIDEBAR -->
		<!-- MAIN -->
		<div class="main">
			<!-- MAIN CONTENT -->
			<div class="main-content">
				<div class="container-fluid">
					<div class="panel panel-profile">
						<div class="clearfix">
							<div id="top-container" style="width:100%;height:80px;">
								<h1 style="align:center;text-align:center;font-family:Microsoft YaHei;">OverView</h1>
							</div>
							<div id="num-container" style="width:100%;height: 120px;float:left">
								<div class="intop-1" style="width:50%;height:100%;float:left">
									<button type="button" class="btn btn-primary btn-toastr" data-context="info" data-message="This is general theme info" data-position="top-right" style="margin-left: 35%;">总监测次数</button>
									<h1 id="test-num" style="align:center;text-align:center;font-family:Microsoft YaHei;font-size: 60px;">0</h1>
								</div>
								<div class="intop-2" style="width:50%;height:100%;float:left">
									<button type="button" class="btn btn-success btn-toastr" data-context="success" data-message="This is success info" data-position="top-right" style="margin-left: 35%;">总监测用户数</button>
									<h1 id="mac-num" style="align:center;text-align:center;font-family:Microsoft YaHei;font-size: 60px;">0</h1>
								</div>
							</div>
							<div id="lib-container" style="width:100%;height: 20px;float:left;"></div>
							<div id="main-container" style="width:100%;height: 400px;float:left"></div>
							<div id="area-container" style="width:100%;height: 500px;float:left"></div>
						</div>
					</div>
				</div>
			</div>
			<!-- END MAIN CONTENT -->
		</div>
		<!-- END MAIN -->
		<div class="clearfix"></div>
		<footer>
			<div class="container-fluid">
				<p class="copyright">&copy; 2017 <a href="#" target="_blank">Lab640</a>. All Rights Reserved.</p>
			</div>
		</footer>
	</div>
	<!-- END WRAPPER -->

	<!-- HighCharts -->
	<script>
        $(function () {
            var chart = new Highcharts.Chart({
//            $('#main-container').highcharts({
                chart: {
                    renderTo : 'main-container',
                    plotBackgroundColor: null,
                    plotBorderWidth: null,
                    plotShadow: false
                },
                title: {
                    text: '用户主观Mos值占比'
                },
                tooltip: {
                    headerFormat: '{series.name}<br>',
                    pointFormat: '{point.name}: <b>{point.percentage:.1f}%</b>'
                },
				color:[
                    '#8B1A1A',
					'#DC143C',
					'#836FFF',
					'#4A708B',
					'#43CD80'
				],
                plotOptions: {
                    pie: {
                        allowPointSelect: true,
                        cursor: 'pointer',
                        dataLabels: {
                            enabled: true,
                            format: '<b>{point.name}</b>: {point.percentage:.1f} %',
							color:'#000000',
							connectorColor:'#000000'
                        }
                    }
                },
                series: [{
                    type: 'pie',
                    name: '用户打分占比',
                    data: [
                        ['1分',10],
                        ['2分',10],
                        ['3分',10],
                        ['4分',10],
                        {
                            name: '5分',
                            y: 60,
                            sliced: true,
                            selected: true
                        }
                    ]
                }]
            });
            $.ajax({
                url:"http://localhost:8080/qoe/api/high/main",
                dataType:"json",
                type:"GET",
                success:function(response){
                    var data = response.data;
                    console.info(data.mos1);
                    var arr = new Array();
                    var value1 = ['1分', data.mos1]
					var value2 = ['2分', data.mos2]
                    var value3 = ['3分', data.mos3]
                    var value4 = ['4分', data.mos4]
                    var value5 = ['5分', data.mos5]
					arr.push(value1)
                    arr.push(value2)
                    arr.push(value3)
                    arr.push(value4)
                    arr.push(value5)
					chart.series[0].setData(arr)
                }
            });
        });

	</script>
	<script>
        $(function () {
            var area_chart = new Highcharts.Chart({
//            $('#time-container').highcharts({
                chart: {
                    renderTo: 'area-container',
                    zoomType: 'xy'
                },
                title: {
                    text: '各个区域的Mos平均值和方差对比图'
                },
                subtitle: {
                    text: 'QoE平台'
                },
                xAxis: [{
                    categories: [],
                    crosshair: true,
                    style: {
                        color: Highcharts.getOptions().colors[2]
                    }
                }],
                yAxis: [{ // Primary yAxis
                    labels: {
                        format: '{value} ',
                        style: {
                            color: Highcharts.getOptions().colors[2]
                        }
                    },
                    title: {
                        text: '方差值',
                        style: {
                            color: Highcharts.getOptions().colors[2]
                        }
                    },
                    opposite: true
                }, { // Secondary yAxis
                    gridLineWidth: 0,
                    title: {
                        text: 'Mos值',
                        style: {
                            color: Highcharts.getOptions().colors[2]
                        }
                    },
                    labels: {
                        format: '{value}',
                        style: {
                            color: Highcharts.getOptions().colors[2]
                        }
                    }
                }],
                tooltip: {
                    shared: true
                },
                legend: {
                    layout: 'vertical',
                    align: 'left',
                    x: 80,
                    verticalAlign: 'top',
                    y: 55,
                    floating: true,
                    backgroundColor: (Highcharts.theme && Highcharts.theme.legendBackgroundColor) || '#FFFFFF'
                },
                series: [{
                    name: '平均Mos值',
                    type: 'spline',
                    yAxis: 1,
                    data: [],
                    tooltip: {
                        valueSuffix: ' '
                    }
                }, {
                    name: '方差值',
                    type: 'spline',
                    data: [],
                    tooltip: {
                        valueSuffix: ' '
                    }
                }]
            });
            $.ajax({
                url:"http://localhost:8080/qoe/api/high/area",
                dataType:"json",
                type:"GET",
                success:function(response){
                    var data = response.data;
                    area_chart.xAxis[0].categories = data.categories
                    area_chart.series[0].setData(data.avgList)
                    area_chart.series[1].setData(data.varianceList)
                }
            });
        });


	</script>
</body>

</html>
