<!doctype html>
<html lang="en">

<head>
	<title>移动视频业务QoE评测系统</title>
	<meta charset="utf-8">
	<link rel="icon" href="https://static.jianshukeji.com/highcharts/images/favicon.ico">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
	<!-- VENDOR CSS -->

	<link rel="stylesheet" href="assets/vendor/bootstrap/css/bootstrap.min.css">
	
	<link rel="stylesheet" href="assets/vendor/bootstrap/css/bootstrap-tour.min.css">
	<link rel="stylesheet" href="assets/vendor/font-awesome/css/font-awesome.min.css">
	<link rel="stylesheet" href="assets/vendor/linearicons/style.css">
	<!-- MAIN CSS -->
	<link rel="stylesheet" href="assets/css/main.css">
	<!-- FOR DEMO PURPOSES ONLY. You should remove this in your project -->
	<link rel="stylesheet" href="assets/css/demo.css">
	<!-- GOOGLE FONTS -->
	<link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600,700" rel="stylesheet">
	<!-- ICONS -->
	<link rel="apple-touch-icon" sizes="76x76" href="assets/img/apple-icon.png">
	<link rel="icon" type="image/png" sizes="96x96" href="assets/img/favicon.png">

	<!-- Javascript -->
	<script src="assets/vendor/jquery/jquery.min.js"></script>
	<script src="assets/vendor/bootstrap/js/bootstrap.min.js"></script>
	<script src="assets/vendor/jquery-slimscroll/jquery.slimscroll.min.js"></script>
	<script src="assets/vendor/bootstrap/js/bootstrap-tour.min.js"></script>
	<script src="assets/scripts/klorofil-common.js"></script>
	<script src="https://img.hcharts.cn/highcharts/highcharts.js"></script>
	<script src="https://img.hcharts.cn/highcharts/highcharts-more.js"></script>
	<script src="https://img.hcharts.cn/highcharts-plugins/highcharts-zh_CN.js"></script>
	<!--<script src="https://img.hcharts.cn/highcharts/themes/sand-signika.js"></script>-->

	<link href="assets/vendor/bootstrap/css/bootstrap-table.css" rel="stylesheet">
	<link href="assets/css/building.css" rel="stylesheet">
	<script src="assets/vendor/bootstrap/js/bootstrap-table.js"></script>
		
	<script type="application/javascript">
		var ip = "10.103.93.24:8081";
	</script>
	<script type="application/javascript">
        $.ajax({
            url:"http://"+ip+"/qoe/api/high/stastic",
            dataType:"json",
            type:"GET",
            timeout:15000,
            success:function(response){
                var data = response.data;
                document.getElementById("measure-num").innerHTML = data[0]
                document.getElementById("mac-num").innerHTML = data[1]
                document.getElementById("play-num").innerHTML = data[2]
                document.getElementById("play-time").innerHTML = data[3] + "s"

            }
        });
	</script>
	<script type="application/javascript">
        Date.prototype.Format = function (fmt) { //author: meizz
            var o = {
                "M+": this.getMonth() + 1, //月份
                "d+": this.getDate(), //日
                "H+": this.getHours(), //小时
                "m+": this.getMinutes(), //分
                "s+": this.getSeconds(), //秒
                "q+": Math.floor((this.getMonth() + 3) / 3), //季度
                "S": this.getMilliseconds() //毫秒
            };
            if (/(y+)/.test(fmt)) fmt = fmt.replace(RegExp.$1, (this.getFullYear() + "").substr(4 - RegExp.$1.length));
            for (var k in o)
                if (new RegExp("(" + k + ")").test(fmt)) fmt = fmt.replace(RegExp.$1, (RegExp.$1.length == 1) ? (o[k]) : (("00" + o[k]).substr(("" + o[k]).length)));
            return fmt;
        }
	</script>
	<script type="application/javascript">
        $(function(){
            $("#buildingSelect").change(function() {
                console.log("change");
                console.log("buildingSelect index: "+this.selectedIndex);
                $("#buildingImg").attr("src","assets/img/building"+(this.selectedIndex +1) +".jpg");
                $("#buildingIntroduction").html(this.options[this.selectedIndex].text);
                var building = this.options[this.selectedIndex].text
                $.ajax({
                    url:"http://"+ip+"/qoe/api/high/osCompareByBuilding?building="+building,
                    dataType:"json",
                    type:"GET",
                    success:function(response){
                        var data = response.data;
                        td_chart.xAxis.categories = data[0]
                        td_chart.series[0].setData(data[1])
                        td_chart.series[1].setData(data[2])
                    }
                });
            });
        })
        function changeChart(btn) {
            var obj = $(btn);
            var building = obj.attr("value");

            $.ajax({
                url:"http://"+ip+"/qoe/api/high/osCompareByBuilding?building="+building,
                dataType:"json",
                type:"GET",
                success:function(response){
                    var data = response.data;
                    td_chart.xAxis.categories = data[0]
                    td_chart.series[0].setData(data[1])
                    td_chart.series[1].setData(data[2])
                }
            });

        }
	</script>
</head>

<body>
	<!-- WRAPPER -->
	<div id="wrapper">
		<!-- NAVBAR -->
		<nav class="navbar navbar-default navbar-fixed-top">
			<div class="brand" style="width: 500px;">
				<a href="index.html"/><span class="span-wangjian" style="width:300px;">移动视频业务QoE评测系统</span>
			</div>

			<div class="container-fluid">

				<div class="navbar-btn navbar-btn-right">
					<a class="btn btn-success update-pro" href="#downloads/klorofil-pro-bootstrap-admin-dashboard-template/?utm_source=klorofil&utm_medium=template&utm_campaign=KlorofilPro" title="Upgrade to Pro" target="_blank"><i class="fa fa-rocket"></i> <span>SHOW</span></a>
				</div>
				<div id="navbar-menu">
					<ul class="nav navbar-nav navbar-right">
						<li class="dropdown">
							<a href="#" class="dropdown-toggle icon-menu" data-toggle="dropdown">
								<i class="lnr lnr-alarm"></i>
								<span class="badge bg-danger">2</span>
							</a>
							<ul class="dropdown-menu notifications">
								<li><a href="#" class="notification-item"><span class="dot bg-warning"></span>欢迎使用QoE测量数据展示平台！</a></li>
								<li><a href="#" class="notification-item"><span class="dot bg-danger"></span>请尽情使用吧~</a></li>
								<li><a href="#" class="more">查看所有</a></li>
							</ul>
						</li>
						<li class="dropdown">
							<a href="#" class="dropdown-toggle" data-toggle="dropdown"><img src="assets/img/user.png" class="img-circle" alt="Avatar"> <span>Lab640</span> <i class="icon-submenu lnr lnr-chevron-down"></i></a>
							<ul class="dropdown-menu">
								<li><a href="#"><i class="lnr lnr-user"></i> <span>个人中心</span></a></li>
								<li><a href="#"><i class="lnr lnr-envelope"></i> <span>我的消息</span></a></li>
								<li><a href="#"><i class="lnr lnr-cog"></i> <span>设置</span></a></li>
								<li><a href="#"><i class="lnr lnr-exit"></i> <span>注销</span></a></li>
							</ul>
						</li>
						<!-- <li>
							<a class="update-pro" href="#downloads/klorofil-pro-bootstrap-admin-dashboard-template/?utm_source=klorofil&utm_medium=template&utm_campaign=KlorofilPro" title="Upgrade to Pro" target="_blank"><i class="fa fa-rocket"></i> <span>UPGRADE TO PRO</span></a>
						</li> -->
					</ul>
				</div>
			</div>
		</nav>
		<!-- END NAVBAR -->
		<!-- LEFT SIDEBAR -->
		<div id="sidebar-nav" class="sidebar">
			<div class="sidebar-scroll">
				<nav>
					<ul class="nav">
						<li><a href="index.html" class=""><i class="lnr lnr-home"></i> <span>首页</span></a></li>
						<li id="dataoverview"><a href="page-class1.html" class=""><i class="lnr lnr-chart-bars"></i><span>数据总览</span></a></li>
						<li><a href="about.html" class=""><i class="lnr lnr-alarm"></i> <span>关于我们</span></a></li>
					</ul>
				</nav>
			</div>
		</div>
		<!-- END LEFT SIDEBAR -->
		<!-- MAIN -->
		<div class="main">
			<!-- MAIN CONTENT -->
			<div class="main-content">
				<div class="container-fluid">
					<div id="overview" class="panel panel-headline">
						<div class="panel-heading">
							<h3 class="panel-title">数据总览</h3>
							<p class="panel-subtitle">Period: Sep 14, 2017 - Now</p>
						</div>
						<div class="panel-body">
							<div class="row">
								<div class="col-md-3">
									<div class="metric">
										<span class="icon"><i class="fa fa-bar-chart"></i></span>
										<p>
											<span class="number" id="measure-num">602</span>
											<span class="title">测量总次数</span>
										</p>
									</div>
								</div>
								<div class="col-md-3">
									<div class="metric">
										<span class="icon"><i class="lnr lnr-user"></i></span>
										<p>
											<span class="number" id="mac-num">203</span>
											<span class="title">总检测用户数</span>
										</p>
									</div>
								</div>
								<div class="col-md-3">
									<div class="metric">
										<span class="icon"><i class="fa fa-eye"></i></span>
										<p>
											<span class="number" id="play-num">332</span>
											<span class="title">视频播放次数</span>
										</p>
									</div>
								</div>
								<div class="col-md-3">
									<div class="metric">
										<span class="icon"><i class="fa fa-line-chart"></i></span>
										<p>
											<span class="number" id="play-time">43s</span>
											<span class="title">平均播放时长</span>
										</p>
									</div>
								</div>
							</div>

						</div>
					</div>
					<div class="row">
						<div class="col-md-6">
							<!-- RECENT PURCHASES -->
							<div id="mosSub" class="panel">
								<div class="panel-heading">
									<h3 class="panel-title">用户主观MoS值分布</h3>
									<div class="right">
										<button type="button" class="btn-toggle-collapse"><i class="lnr lnr-chevron-up"></i></button>
										<button type="button" class="btn-remove"><i class="lnr lnr-cross"></i></button>
									</div>
								</div>
								<div class="panel-body no-padding">
									<div id="main-container" style="width:100%;height: 100%;"></div>
								</div>
							</div>
							<!-- END RECENT PURCHASES -->
						</div>
						<div class="col-md-6">
							<!-- RECENT PURCHASES -->
							<div id="mosObj" class="panel">
								<div class="panel-heading">
									<h3 class="panel-title">用户客观MoS值分布</h3>
									<div class="right">
										<button type="button" class="btn-toggle-collapse"><i class="lnr lnr-chevron-up"></i></button>
										<button type="button" class="btn-remove"><i class="lnr lnr-cross"></i></button>
									</div>
								</div>
								<div class="panel-body no-padding">
									<div id="obj-container" style="width:100%;height: 100%;"></div>
								</div>
							</div>
							<!-- END RECENT PURCHASES -->
						</div>
					</div>
					<div class="row">
						<div class="col-md-12">
							<!-- RECENT PURCHASES -->
							<div id="moscomparebybuilding" class="panel">
								<div class="panel-heading">
									<h3 class="panel-title">不同区域的MoS平均值和方差对比图</h3>
									<div class="right">
										<button type="button" class="btn-toggle-collapse"><i class="lnr lnr-chevron-up"></i></button>
										<button type="button" class="btn-remove"><i class="lnr lnr-cross"></i></button>
									</div>
								</div>
								<div class="panel-body no-padding">
									<div id="area-container" style="width:100%;height: 100%"></div>
								</div>
							</div>
							<!-- END RECENT PURCHASES -->
						</div>
					</div>
					<div id="moscompareinbuilding" class="row">
						<div class="col-md-3">
							<!-- RECENT PURCHASES -->
							<div class="panel">
								<div class="panel-heading">
									<h3 class="panel-title">区域选择</h3>
									<div class="right">
										<button type="button" class="btn-toggle-collapse"><i class="lnr lnr-chevron-up"></i></button>
										<button type="button" class="btn-remove"><i class="lnr lnr-cross"></i></button>
									</div>
								</div>
								<div class="panel-body no-padding">
									<div id="select-container" style="width:100%;height: 100%;overflow:hidden;">
										<select id="buildingSelect" class="form-control input-lg">
											<option value="cheese">教一</option>
											<option value="tomatoes">教二</option>
											<option value="mozarella">教三</option>
											<option value="mushrooms">教四</option>
											<option value="cheese">主干道</option>
											<option value="pepperoni">教三教四间广场</option>
											<option value="pepperoni">主楼</option>
											<option value="pepperoni">经管楼</option>
											<option value="pepperoni">新科研楼</option>
											<option value="pepperoni">图书馆</option>
											<option value="pepperoni">篮球场</option>
											<option value="pepperoni">操场</option>
											<option value="pepperoni">体育馆</option>
											<option value="pepperoni">学生餐厅</option>
											<option value="pepperoni">综合餐厅</option>
											<option value="pepperoni">科学会堂</option>
											<option value="pepperoni">音乐喷泉</option>
											<option value="pepperoni">学生公寓1</option>
											<option value="pepperoni">学生公寓2</option>
											<option value="pepperoni">学生公寓3</option>
											<option value="pepperoni">学生公寓4</option>
											<option value="pepperoni">学生公寓5</option>
											<option value="pepperoni">学生公寓6</option>
											<option value="pepperoni">学生公寓8</option>
											<option value="pepperoni">学生公寓9</option>
											<option value="pepperoni">学生公寓10</option>
											<option value="pepperoni">学生公寓13</option>
											<option value="pepperoni">学生公寓29</option>
											<option value="pepperoni">留学生公寓1</option>
											<option value="pepperoni">学苑超市</option>
											<option value="pepperoni">综合服务楼</option>
											<option value="pepperoni">北邮科技大厦</option>
											<option value="pepperoni">明光楼</option>
										</select>
										<div class="profile-header">
											<div class="profile-main">
												<img id="buildingImg" src="assets/img/building2.jpg" alt="xx" style="width:100%;height:290px;min-height: 290px;">
											</div>
											<div class="profile-stat">
												<div class="row">
													<div class="col-md-12 stat-item">
														<span id="buildingIntroduction">教一</span>
													</div>
												</div>
											</div>
										</div>
									</div>
								</div>
							</div>
							<!-- END RECENT PURCHASES -->
						</div>
						<div class="col-md-9">
							<!-- RECENT PURCHASES -->
							<div  class="panel">
								<div class="panel-heading">
									<h3 class="panel-title">区域主客观MoS值对比</h3>
									<div class="right">
										<button type="button" class="btn-toggle-collapse"><i class="lnr lnr-chevron-up"></i></button>
										<button type="button" class="btn-remove"><i class="lnr lnr-cross"></i></button>
									</div>
								</div>
								<div class="panel-body no-padding">
									<div id="num-container" style="width:100%;height: 100%;"></div>
								</div>
							</div>
							<!-- END RECENT PURCHASES -->
						</div>
					</div>
				</div>
			</div>
			<!-- END MAIN CONTENT -->
		</div>
		<!-- END MAIN -->
		<div class="clearfix"></div>
		<footer>
			<div class="container-fluid">
				<p class="copyright">&copy; 2017 <a href="#" target="_blank">Lab640</a>. All Rights Reserved.</p>
			</div>
		</footer>
	</div>
	<!-- END WRAPPER -->

	<!-- HighCharts -->
	<script>
        $(function () {
            var chart = new Highcharts.Chart({
//            $('#main-container').highcharts({
                chart: {
                    renderTo : 'main-container',
                    plotBackgroundColor: null,
                    plotBorderWidth: null,
                    plotShadow: false
                },
                title :{
                    text:null
                },
                tooltip: {
                    headerFormat: '{series.name}<br>',
                    pointFormat: '{point.name}: <b>{point.percentage:.1f}%</b>'
                },
				color:[
                    '#8B1A1A',
					'#DC143C',
					'#836FFF',
					'#4A708B',
					'#43CD80'
				],
                plotOptions: {
                    pie: {
                        allowPointSelect: true,
                        cursor: 'pointer',
                        dataLabels: {
                            enabled: true,
                            format: '<b>{point.name}</b>: {point.percentage:.1f} %',
							color:'#000000',
							connectorColor:'#000000'
                        }
                    }
                },
                series: [{
                    type: 'pie',
                    name: '用户打分占比',
                    data: [
                        ['1分',10],
                        ['2分',10],
                        ['3分',10],
                        ['4分',10],
                        {
                            name: '5分',
                            y: 60,
                            sliced: true,
                            selected: true
                        }
                    ]
                }]
            });
            $.ajax({
                url:"http://"+ip+"/qoe/api/high/main",
                dataType:"json",
                type:"GET",
                success:function(response){
                    var data = response.data;
                    console.info(data.mos1);
                    var arr = new Array();
                    var value1 = ['1分', data.mos1]
					var value2 = ['2分', data.mos2]
                    var value3 = ['3分', data.mos3]
                    var value4 = ['4分', data.mos4]
                    var value5 = ['5分', data.mos5]
					arr.push(value1)
                    arr.push(value2)
                    arr.push(value3)
                    arr.push(value4)
                    arr.push(value5)
					chart.series[0].setData(arr)
                }
            });
        });

	</script>
	<script>
        $(function () {
            var chart = new Highcharts.Chart({
//            $('#main-container').highcharts({
                chart: {
                    renderTo : 'obj-container',
                    plotBackgroundColor: null,
                    plotBorderWidth: null,
                    plotShadow: false
                },
                title :{
                    text:null
                },
                tooltip: {
                    headerFormat: '{series.name}<br>',
                    pointFormat: '{point.name}: <b>{point.percentage:.1f}%</b>'
                },
                color:[
                    '#8B1A1A',
                    '#DC143C',
                    '#836FFF',
                    '#4A708B',
                    '#43CD80'
                ],
                plotOptions: {
                    pie: {
                        allowPointSelect: true,
                        cursor: 'pointer',
                        dataLabels: {
                            enabled: true,
                            format: '<b>{point.name}</b>: {point.percentage:.1f} %',
                            color:'#000000',
                            connectorColor:'#000000'
                        }
                    }
                },
                series: [{
                    type: 'pie',
                    name: '用户打分占比',
                    data: [
                        ['1分',10],
                        ['2分',10],
                        ['3分',10],
                        ['4分',10],
                        {
                            name: '5分',
                            y: 60,
                            sliced: true,
                            selected: true
                        }
                    ]
                }]
            });
            $.ajax({
                url:"http://"+ip+"/qoe/api/high/mainobj",
                dataType:"json",
                type:"GET",
                success:function(response){
                    var data = response.data;
                    console.info(data.mos1);
                    var arr = new Array();
                    var value1 = ['1分', data.mos1]
                    var value2 = ['2分', data.mos2]
                    var value3 = ['3分', data.mos3]
                    var value4 = ['4分', data.mos4]
                    var value5 = ['5分', data.mos5]
                    arr.push(value1)
                    arr.push(value2)
                    arr.push(value3)
                    arr.push(value4)
                    arr.push(value5)
                    chart.series[0].setData(arr)
                }
            });
        });

	</script>

	<script>
        $(function () {
            var area_chart = new Highcharts.Chart({
//            $('#time-container').highcharts({
                chart: {
                    renderTo:'area-container',
                    zoomType: 'xy'
                },
                title: {
                    text: null
                },
                xAxis: [{
                    categories: [],
                    crosshair: true,
                }],
                yAxis: [{ // Primary yAxis
                    labels: {
                        format: '{value} ',
                        style: {
                            color: '#000'
                        }
                    },
                    title: {
                        text: '方差值',
                        style: {
                            color: '#000'
                        }
                    },
                    opposite: true
                }, { // Secondary yAxis
                    gridLineWidth: 0,
                    title: {
                        text: 'Mos值',
                        style: {
                            color: '#000'
                        }
                    },
                    labels: {
                        format: '{value}',
                        style: {
                            color: '#000'
                        }
                    }
                }],
                tooltip: {
                    shared: true
                },

                series: [{
                    name: '平均Mos值',
                    type: 'column',
                    yAxis: 1,
                    data: [],
                    tooltip: {
                        valueSuffix: ' '
                    }
                }, {
                    name: '方差值',
                    type: 'column',
                    data: [],
                    tooltip: {
                        valueSuffix: ' '
                    }
                }]
            });
            $.ajax({
                url:"http://"+ip+"/qoe/api/high/area",
                dataType:"json",
                type:"GET",
                success:function(response){
                    var data = response.data;
                    area_chart.xAxis[0].categories = data.categories
                    area_chart.series[0].setData(data.avgList)
                    area_chart.series[1].setData(data.varianceList)
                }
            });
        });


	</script>
	<script>
        $(function () {
            // Set up the chart
            td_chart = new Highcharts.Chart({
//        $('#container').highcharts({
                chart: {
                    renderTo: 'num-container',
                    type: 'spline'
                },
                title: {
                    text: null
                },
                xAxis: {
                    title:'测量次序',
                    categories: [],
                },
                yAxis: {
                    title: {
                        text: 'Mos值（1~5）'
                    },
                    min: 0,
                    minorGridLineWidth: 0,
                    gridLineWidth: 0,
                    alternateGridColor: null,
                    plotBands: [{ // Light air
                        from: 0.5,
                        to: 1.5,
                        color: 'rgba(64, 224, 205, 0.1)',
                        label: {
                            text: '',
                            style: {
                                color: '#606060'
                            }
                        }
                    }, { // Light breeze
                        from: 1.5,
                        to: 2.5,
                        color: 'rgba(24, 139, 34, 0.1)',
                        label: {
                            text: '',
                            style: {
                                color: '#606060'
                            }
                        }
                    }, { // Gentle breeze
                        from: 2.5,
                        to: 3.5,
                        color: 'rgba(255, 215, 0, 0.1)',
                        label: {
                            text: '',
                            style: {
                                color: '#606060'
                            }
                        }
                    }, { // Moderate breeze
                        from: 3.5,
                        to: 4.5,
                        color: 'rgba(255, 128, 0, 0.1)',
                        label: {
                            text: '',
                            style: {
                                color: '#606060'
                            }
                        }
                    }, { // Fresh breeze
                        from: 4.5,
                        to: 5,
                        color: 'rgba(255, 0, 0, 0.1)',
                        label: {
                            text: '',
                            style: {
                                color: '#606060'
                            }
                        }
                    }]
                },
                plotOptions: {
                    spline: {
                        dataLabels: {
                            enabled: true          // 开启数据标签
                        }
                    }
                },
                series: [{
                    name: '主观Mos值',
                    data: [],
                }, {
                    name: '客观Mos值',
                    data: [],
                }]
            });
            $.ajax({
                url:"http://"+ip+"/qoe/api/high/osCompare",
                dataType:"json",
                type:"GET",
                success:function(response){
                    var data = response.data;
                    td_chart.xAxis.categories = data[0]
                    td_chart.series[0].setData(data[1])
                    td_chart.series[1].setData(data[2])
                }
            });
        });
	</script>
	<!-- 页面引导 JavaScript -->
	<script src="assets/scripts/guide.js"></script>
</body>

</html>
